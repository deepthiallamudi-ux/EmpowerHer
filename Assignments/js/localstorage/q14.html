<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo List App</title>
    </head>
<body>
    <h1>Todo List</h1>
    
    <!-- Input section to add tasks -->
    <input type="text" id="taskInput" placeholder="Enter a task">
    <button onclick="addTask()">Add</button>
    
    <!-- Search section to find tasks -->
     <label for="searchInput">Search Tasks:</label>
    <input type="text" id="searchInput" placeholder="Search tasks" oninput="searchTasks()">
    
    <!-- Task list where all tasks will show -->
    <div id="taskList"></div>
    
    <!-- Clear all button -->
    <button onclick="clearAll()">Clear All Tasks</button>

    <script>
        // ========== VARIABLES ==========
        const STORAGE_KEY = 'myTasks';           // Key to save/load tasks from localStorage
        const taskInput = document.getElementById('taskInput');      // Input field for new tasks
        const searchInput = document.getElementById('searchInput');  // Search input field
        const taskList = document.getElementById('taskList');       // Container to display tasks
        let allTasks = [];      // Array holding all tasks
        let displayTasks = [];  // Array holding filtered tasks (used in search)
        
        // ========== LOAD TASKS ==========
        // Load saved tasks from localStorage when page opens
        function loadTasks() {
            // Get tasks from localStorage (returns null if empty)
            let saved = localStorage.getItem(STORAGE_KEY);
            // Parse JSON back to array, or use empty array if no tasks exist
            allTasks = saved ? JSON.parse(saved) : [];
            // Copy all tasks to display (show everything at first)
            displayTasks = [...allTasks];
            // Show all tasks on screen
            showTasks();
        }
        
        // ========== SAVE TASKS ==========
        // Save tasks to localStorage as JSON
        function saveTasks() {
            // Convert array to JSON string and save to localStorage
            localStorage.setItem(STORAGE_KEY, JSON.stringify(allTasks));
        }
        
        // ========== ADD NEW TASK ==========
        // Add a new task to the list
        function addTask() {
            // Get and trim the input text
            let text = taskInput.value.trim();
            // Check if input is empty
            if (text === '') {
                alert('Please enter a task!');
                return;
            }
            // Add new task object with unique ID (timestamp), text, and completed status
            allTasks.push({
                id: Date.now(),      // Unique ID
                text: text,          // Task description
                completed: false     // Not completed initially
            });
            // Save to localStorage
            saveTasks();
            // Clear the input field
            taskInput.value = '';
            // Update display and show on screen
            displayTasks = [...allTasks];
            showTasks();
        }
        
        // ========== TOGGLE TASK COMPLETION ==========
        // Mark task as completed or uncompleted
        function toggleTask(id) {
            // Loop through all tasks to find matching ID
            for (let i = 0; i < allTasks.length; i++) {
                if (allTasks[i].id === id) {
                    // Toggle the completed status (true becomes false, false becomes true)
                    allTasks[i].completed = !allTasks[i].completed;
                    break;
                }
            }
            // Save changes and refresh display
            saveTasks();
            showTasks();
        }
        
        // ========== DELETE TASK ==========
        // Remove a task from the list
        function deleteTask(id) {
            // Ask user for confirmation
            if (confirm('Delete this task?')) {
                // Find and remove task with matching ID
                for (let i = 0; i < allTasks.length; i++) {
                    if (allTasks[i].id === id) {
                        allTasks.splice(i, 1);  // Remove 1 item at index i
                        break;
                    }
                }
                // Save changes and update display
                saveTasks();
                searchTasks();  // Refresh search/display
            }
        }
        
        // ========== SEARCH TASKS ==========
        // Filter tasks based on search input (real-time)
        function searchTasks() {
            // Get search text and convert to lowercase for case-insensitive search
            let search = searchInput.value.trim().toLowerCase();
            // If search box is empty, show all tasks
            if (search === '') {
                displayTasks = [...allTasks];
            } else {
                // Filter tasks that contain the search text
                displayTasks = [];
                for (let i = 0; i < allTasks.length; i++) {
                    // Check if task text includes search keyword
                    if (allTasks[i].text.toLowerCase().includes(search)) {
                        displayTasks.push(allTasks[i]);
                    }
                }
            }
            // Refresh display with filtered tasks
            showTasks();
        }
        
        // ========== DISPLAY TASKS ==========
        // Show tasks on screen (creates HTML elements)
        function showTasks() {
            // Clear previous content
            taskList.innerHTML = '';
            // If no tasks, show empty message
            if (displayTasks.length === 0) {
                taskList.innerHTML = '<p>No tasks to show</p>';
                return;
            }
            // Loop through each task and create HTML elements
            for (let i = 0; i < displayTasks.length; i++) {
                let task = displayTasks[i];
                // Create a div for the task
                let taskDiv = document.createElement('div');
                // Add 'completed' class if task is done, otherwise 'task-item' only
                taskDiv.className = task.completed ? 'task-item completed' : 'task-item';
                // Create checkbox, task text, and delete button
                taskDiv.innerHTML = `
                    <input type="checkbox" ${task.completed ? 'checked' : ''} onchange="toggleTask(${task.id})">
                    <span>${task.text}</span>
                    <button onclick="deleteTask(${task.id})">Delete</button>
                `;
                // Add task to the page
                taskList.appendChild(taskDiv);
            }
        }
        
        // ========== CLEAR ALL TASKS ==========
        // Delete all tasks permanently
        function clearAll() {
            // Ask for confirmation before deleting all
            if (confirm('Delete ALL tasks?')) {
                // Empty both arrays
                allTasks = [];
                displayTasks = [];
                // Remove from localStorage
                localStorage.removeItem(STORAGE_KEY);
                // Clear search input
                searchInput.value = '';
                // Refresh display (shows empty message)
                showTasks();
                // Show confirmation message
                alert('All tasks deleted!');
            }
        }
        
        // ========== INITIALIZATION ==========
        // Load tasks when page opens
        loadTasks();
    </script>
</body>
</html>

